<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        #main>div{
            border: 2px solid;
        }
    </style>
  </head>
  <body>
    <h1>JSON-SERVER</h1>


    <div id="main"></div>

    

    <form >
        <input id="username" type="text" placeholder="username">
        <input id="password" type="text" placeholder="password">
        <input type="submit">
    </form>




   
  </body>
  <script>
    let api = "http://localhost:3000/data";

    let main = document.getElementById("main")

    let form = document.querySelector("form")


    form.addEventListener("submit",PostData)

    async function getData() {
      let res = await fetch(api);
      let data = await res.json();
    display(data)
    }


    function display(data){
         data.map(el=>{
            // console.log(el)
            let div = document.createElement("div")
            let name = document.createElement("h1")
            name.innerText = el.username;
            let pass = document.createElement("h2")
            pass.innerText = el.password

            let update = document.createElement("button")
            update.innerText = "Update"

            let del = document.createElement("button")
            del.addEventListener("click",()=>{
                Delfun(el.id)
            })
            del.innerText="Delete"

            div.append(name,pass,update,del)

            main.append(div)

         })
    }

    getData();

    async function PostData() {
      let res = await fetch(
        api,

        {
          method: "POST",
          body: JSON.stringify({
             username:form.username.value,
             password:form.password.value
          }),
          headers: new Headers({
            "Content-Type": "application/json",
          }),
        }
      );
    }



    async function Delfun(id){
        // console.log(id)
         let res = await fetch(`${api}/${id}`,
        {
          method: "DELETE",
         
        }
      );
    }


        async function UpdateData() {
      let res = await fetch(
        api,

        {
          method: "POST",
          body: JSON.stringify({
             username:form.username.value,
             password:form.password.value
          }),
          headers: new Headers({
            "Content-Type": "application/json",
          }),
        }
      );
    }
  </script>
</html>
